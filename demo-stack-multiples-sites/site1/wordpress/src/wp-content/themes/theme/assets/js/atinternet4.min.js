var siteID = (typeof site_id !== "undefined") ? site_id : 582195;
var level2 = (typeof level2Id !== "undefined") ? level2Id : 24;

/*! Smart tag AT-Internet */
;(function(){var dfltPluginCfg={"sourceFile":"upload","info":true};var dfltGlobalCfg={"site":siteID,"log":"logc407","logSSL":"logs1407","domain":"xiti.com","secure":false,"pixelPath":"/hit.xiti","disableCookie":false,"cookieSecure":false,"cookieDomain":"","preview":false,"plgs":["Clicks","ContextVariables","IdentifiedVisitor","InternalSearch","OnSiteAds","Page","RichMedia"],"lazyLoadingPath":"","documentLevel":"document","redirect":false,"activateCallbacks":true,"medium":"","ignoreEmptyChapterValue":false,"base64Storage":false};(function(a,e){a.ATInternet=a.ATInternet||{};a.ATInternet.Tracker=a.ATInternet.Tracker||{};a.ATInternet.Tracker.Plugins=a.ATInternet.Tracker.Plugins||{}})(window);
    var Utils=function(){function a(c){var l=typeof c;if("object"!==l||null===c)return"string"===l&&(c='"'+c+'"'),String(c);var h,g,b=[],f=c&&c.constructor===Array;for(h in c)c.hasOwnProperty(h)&&(g=c[h],l=typeof g,"function"!==l&&"undefined"!==l&&("string"===l?g='"'+g.replace(/[^\\]"/g,'\\"')+'"':"object"===l&&null!==g&&(g=a(g)),b.push((f?"":'"'+h+'":')+String(g))));return(f?"[":"{")+String(b)+(f?"]":"}")}var e=this;e.cloneSimpleObject=function l(a,g){if("object"!==typeof a||null===a||a instanceof Date)return a;
        var b=new a.constructor||a.constructor(),f;for(f in a)a.hasOwnProperty(f)&&(void 0===f||g&&void 0===a[f]||(b[f]=l(a[f])));return b};e.jsonSerialize=function(l){return"undefined"!==typeof JSON&&JSON.stringify?JSON.stringify(l):a(l)};e.jsonParse=function(a){try{if("undefined"!==typeof JSON&&JSON.parse)return JSON.parse(a);var h;h=null===a?a:"string"===typeof a?(new Function("return "+a))():!1;return h}catch(g){return null}};e.arrayIndexOf=function(a,h){return Array.indexOf?a.indexOf(h):function(a){if(null==
        this)throw new TypeError;var b=Object(this),f=b.length>>>0;if(0===f)return-1;var d=0;1<arguments.length&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&Infinity!=d&&-Infinity!=d&&(d=(0<d||-1)*Math.floor(Math.abs(d))));if(d>=f)return-1;for(d=0<=d?d:Math.max(f-Math.abs(d),0);d<f;d++)if(d in b&&b[d]===a)return d;return-1}.apply(a,[h])};e.uuid=function(){return{v4:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var h=16*Math.random()|0;return("x"===a?h:h&3|8).toString(16)})},
        num:function(a){var h=new Date,g=function(a){a-=100*Math.floor(a/100);return 10>a?"0"+a:a};return g(h.getHours())+""+g(h.getMinutes())+""+g(h.getSeconds())+""+function(a){return Math.floor((9*Math.random()+1)*Math.pow(10,a-1))}(a-6)}}};e.getObjectKeys=function(a){var h=[],g;for(g in a)a.hasOwnProperty(g)&&h.push(g);return h};e.completeFstLevelObj=function(a,h,g){if(a){if(h)for(var b in h)!h.hasOwnProperty(b)||a[b]&&!g||(a[b]=h[b])}else a=h;return a};e.isPreview=function(){return window.navigator&&
        "preview"===window.navigator.loadPurpose};e.isPrerender=function(a){var h,g=!1,b=["webkit","ms"];if("prerender"===document.visibilityState)h="visibilitychange";else for(var f=0;f<b.length;f++)"prerender"===document[b[f]+"VisibilityState"]&&(h=b[f]+"visibilitychange");if("undefined"!==typeof h){var d=function(b){a(b);e.removeEvtListener(document,h,d)};e.addEvtListener(document,h,d);g=!0}return g};var k=e.addEvtListener=function(a,h,g){a.addEventListener?a.addEventListener(h,g,!1):a.attachEvent&&a.attachEvent("on"+
        h,g)};e.removeEvtListener=function(a,h,g){a.removeEventListener?a.removeEventListener(h,g,!1):a.detachEvent&&a.detachEvent("on"+h,g)};e.loadScript=function(a,h){var g;h=h||function(){};g=document.createElement("script");g.type="text/javascript";g.src=a.url;g.async=!1;g.defer=!1;g.onload=g.onreadystatechange=function(a){a=a||window.event;if("load"===a.type||/loaded|complete/.test(g.readyState)&&(!document.documentMode||9>document.documentMode))g.onload=g.onreadystatechange=g.onerror=null,h(null,a)};
        g.onerror=function(a,d,b){g.onload=g.onreadystatechange=g.onerror=null;h({msg:"script not loaded",event:a})};var b=document.head||document.getElementsByTagName("head")[0];b.insertBefore(g,b.lastChild)};e.hashcode=function(a){var h=0;if(0===a.length)return h;for(var g=0;g<a.length;g++)var b=a.charCodeAt(g),h=(h<<5)-h+b,h=h&h;return h};e.setLocation=function(a){var h=a.location;a=window[a.target]||window;h&&(a.location.href=h)};e.dispatchCallbackEvent=function(a){var h=document.createEvent("Event");
        h.initEvent("ATCallbackEvent",!0,!0);h.name=a;document.dispatchEvent(h)};e.addCallbackEvent=function(a){document.createEvent("Event").initEvent("ATCallbackEvent",!0,!0);k(document,"ATCallbackEvent",a)}};window.ATInternet.Utils=new Utils;
    var BuildManager=function(a){var e=this,k=function(a,d,b){a="&"+a+"=";return{param:a,paramSize:a.length,str:d,strSize:d.length,truncate:b}},c=function(b,d){var l="",c=0,h=!0,m;for(m in b)if(b.hasOwnProperty(m)){var p=b[m];if(p){var h=!1,g=d-c;if(p.strSize+p.paramSize<g)l+=p.param+p.str,c+=p.strSize+p.paramSize,b[m]=void 0,h=!0;else{p.truncate?(l+=p.param+p.str.substr(0,g),b[m].str=p.str.substr(g,p.strSize-1),b[m].strSize=b[m].str.length):p.strSize+p.paramSize>d&&(a.emit("Tracker:Hit:Build:Error",
        {lvl:"ERROR",msg:'Too long parameter "'+p.param+'"',details:{value:p.str}}),b[m].str=b[m].str.substr(0,d-p.paramSize-1),b[m].strSize=b[m].str.length);break}}else h=!0}return[l,h?null:b]},l=["ati","atc","pdtl","stc","dz"],h=function(b,d,n){var h=function(a){if(a==={})return"";var b=[],d;d={};var f=0,m=!1,n=void 0,h,g,e;for(e in a)if(a.hasOwnProperty(e)){var q=a[e].value;"function"===typeof q&&(q=q());q=q instanceof Array?q.join(a[e].options.separator||","):"object"===typeof q?window.ATInternet.Utils.jsonSerialize(q):
        "undefined"===typeof q?"undefined":q.toString();a[e].options.encode&&(q=encodeURIComponent(q));var s=k(e,q,-1<window.ATInternet.Utils.arrayIndexOf(l,e)),f=f+(s.paramSize+s.strSize);if(a[e].options.last)1490<q.length&&q.substr(0,1490),h=e,g=s;else if(d[e]=s,1500<d[e].paramSize+d[e].strSize&&!d[e].truncate){m=!0;n=e;break}}h&&(d[h]=g);d=[d,f,m,n];a=d[0];if(d[2])d=d[3],a=a[d],a.str=a.str.substr(0,1450),a.strSize=1450,f={},f.mherr=k("mherr","1",!1),f[d]=a,b.push(c(f,1500)[0]);else if(d=c(a,1500),null===
    d[1])b=d[0];else for(b.push(d[0]);null!==d[1];)d=c(a,1500),b.push(d[0]);return b},g="";a.buffer.presentInFilters(d,"hitType")||(d=a.buffer.addInFilters(d,"hitType",["page"]));d=a.buffer.addInFilters(d,"hitType",["all"]);var m;if(b){d=a.buffer.addInFilters(d,"permanent",!0);d=a.buffer.get(d,!0);for(m in b)b.hasOwnProperty(m)&&(d[m]={value:b[m],options:{}});g=h(d)}else for(m in d=a.buffer.get(d,!0),g=h(d),d)d.hasOwnProperty(m)&&!d[m].options.permanent&&a.buffer.del(m);n&&n(g)},g=function(b){var d=a.getConfig("secure"),
        l="https:"===document.location.protocol,l=d||l?a.getConfig("logSSL"):a.getConfig("log"),h=a.getConfig("baseURL"),c=a.getConfig("domain"),m=a.getConfig("pixelPath"),p=a.getConfig("site");(h||l&&c&&m)&&p?b&&b(null,(h?h:(d?"https://":"//")+l+("."+c)+m)+("?s="+p)):b&&b({message:"Config error"})},b=function(a,b,l){g(function(c,g){c?l&&l(c):h(a,b,function(a){var b=[],d=ATInternet.Utils.uuid().num(13);if(a instanceof Array)if(1===a.length)b.push(g+"&mh=1-2-"+d+a[0]);else for(var f=1;f<=a.length;f++)b.push(g+
        "&mh="+f+"-"+a.length+"-"+d+a[f-1]);else b.push(g+a);l&&l(null,b)})})};e.send=function(f,d){b(f,d,function(b,d){if(b)a.emit("Tracker:Hit:Build:Error",{lvl:"ERROR",msg:b.message,details:{hits:d}});else for(var f=0;f<d.length;f++)e.sendUrl(d[f])})};e.sendUrl=function(b){var d=function(b,d){return function(){return function(f){a.emit(b,{lvl:-1===b.indexOf("Error")?"INFO":"ERROR",details:{hit:d,event:f}})}}()},l=new Image;l.onload=d("Tracker:Hit:Sent:Ok",b);l.onerror=d("Tracker:Hit:Sent:Error",b);l.src=
        b}},TriggersManager=function(){function a(a,h,c){for(var b=[],f=0;f<a.length;f++)a[f].callback(h,c),a[f].singleUse||b.push(a[f]);return b}function e(a,c,g,b){var f=a.shift();if("*"===f)return c["*"]=c["*"]||[],c["*"].push({callback:g,singleUse:b}),c["*"].length-1;if(0===a.length)return e([f,"*"],c,g,b);c["*"]=c["*"]||[];c[f]=c[f]||{};return e(a,c[f],g,b)}function k(l,c,g,b){var f=c.shift();"*"!==f&&(0===c.length?k(l,[f,"*"],g,b):g[f]&&(g[f]["*"]=a(g[f]["*"],l,b),k(l,c,g[f],b)))}var c={};this.on=function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     h,g){g=g||!1;return e(a.split(":"),c,h,g)};this.emit=function(l,e){c["*"]&&(c["*"]=a(c["*"],l,e));k(l,l.split(":"),c,e)}},PluginsManager=function(a){var e={},k={},c=0,l={},h=0,g=this.load=function(d,f){"function"===typeof f?"undefined"===typeof a.getConfig.plgAllowed||0===a.getConfig.plgAllowed.length||-1<a.getConfig.plgAllowed.indexOf(d)?(e[d]=new f(a),k[d]&&e[d]&&(k[d]=!1,c--,e[d+"_ll"]&&b(d+"_ll"),0===c&&a.emit("Tracker:Plugin:Lazyload:File:Complete",{lvl:"INFO",msg:"LazyLoading triggers are finished"})),
        a.emit("Tracker:Plugin:Load:"+d+":Ok",{lvl:"INFO"})):a.emit("Tracker:Plugin:Load:"+d+":Error",{lvl:"ERROR",msg:"Plugin not allowed",details:{}}):a.emit("Tracker:Plugin:Load:"+d+":Error",{lvl:"ERROR",msg:"not a function",details:{obj:f}});return a},b=this.unload=function(b){e[b]?(e[b]=void 0,a.emit("Tracker:Plugin:Unload:"+b+":Ok",{lvl:"INFO"})):a.emit("Tracker:Plugin:Unload:"+b+":Error",{lvl:"ERROR",msg:"not a known plugin"});return a},f=this.isLazyloading=function(a){return a?!0===k[a]:0!==c},d=
        function(a){return s(a)?(n(a),!0):!1},n=function(b){k[b]=!0;c++;ATInternet.Utils.loadScript({url:a.getConfig("lazyLoadingPath")+b+".js"})},s=function(a){return!e[a]&&!f(a)&&(e[a+"_ll"]?!0:!1)},q=function(a){l[a]?l[a]++:l[a]=1;h++};this.isExecWaitingLazyloading=function(){return 0!==h};a.exec=this.exec=function(b,d,c,g){var k=null,r=function(a,b,d,f){b=b.split(".");e[a]&&e[a][b[0]]&&(k=1<b.length&&e[a][b[0]][b[1]]?e[a][b[0]][b[1]].apply(e[a],d):e[a][b[0]].apply(e[a],d));f&&f(k)},v=function(b,d,f,c){q(b);
        a.onTrigger("Tracker:Plugin:Load:"+b+":Ok",function(){r(b,d,f,function(d){l[b]--;h--;0===h&&a.emit("Tracker:Plugin:Lazyload:Exec:Complete",{lvl:"INFO",msg:"All exec waiting for lazyloading are done"});c&&c(d)})},!0)};s(b)?(v(b,d,c,g),n(b)):f(b)?v(b,d,c,g):r(b,d,c,g)};this.waitForDependencies=function(b,f){var c=function(a){for(var b={mcount:0,plugins:{}},d=0;d<a.length;d++)e.hasOwnProperty(a[d])||(b.mcount++,b.plugins[a[d]]=!0);return b}(b);if(0===c.mcount)a.emit("Tracker:Plugin:Dependencies:Loaded",
        {lvl:"INFO",details:{dependencies:b}}),f();else for(var l in c.plugins)c.plugins.hasOwnProperty(l)&&(a.emit("Tracker:Plugin:Dependencies:Error",{lvl:"WARNING",msg:"Missing plugin "+l}),a.onTrigger("Tracker:Plugin:Load:"+l,function(a,b){var d=a.split(":"),l=d[3];"Ok"===d[4]&&(c.plugins[l]=!1,c.mcount--,0===c.mcount&&f())},!0),d(l))};this.init=function(){for(var a in ATInternet.Tracker.pluginProtos)ATInternet.Tracker.pluginProtos.hasOwnProperty(a)&&g(a,ATInternet.Tracker.pluginProtos[a])}},CallbacksManager=
        function(a){var e={};this.init=function(){if(a.getConfig("activateCallbacks")){var c=a.getConfig("callbacks");(function(){if("undefined"!==typeof c&&c.include instanceof Array)for(var a=0;a<c.include.length;a++)ATInternet.Callbacks&&ATInternet.Callbacks.hasOwnProperty(c.include[a])&&(e[c.include[a]]={"function":ATInternet.Callbacks[c.include[a]]},ATInternet.Tracker.callbackProtos[c.include[a]]||(ATInternet.Tracker.callbackProtos[c.include[a]]=e[c.include[a]]));else for(a in ATInternet.Callbacks)ATInternet.Callbacks.hasOwnProperty(a)&&
        (e[a]={"function":ATInternet.Callbacks[a]},ATInternet.Tracker.callbackProtos[a]||(ATInternet.Tracker.callbackProtos[a]=e[a]));if("undefined"!==typeof c&&c.exclude instanceof Array)for(a=0;a<c.exclude.length;a++)e[c.exclude[a]]&&(e[c.exclude[a]]=void 0);for(var h in e)e.hasOwnProperty(h)&&e[h]&&k(h,e[h]["function"])})();ATInternet.Utils.addCallbackEvent(function(a){if(a.name){var e=!0;"undefined"!==typeof c&&(c.include instanceof Array&&-1===ATInternet.Utils.arrayIndexOf(c.include,a.name)&&(e=!1),
        c.exclude instanceof Array&&-1!==ATInternet.Utils.arrayIndexOf(c.exclude,a.name)&&(e=!1));if(ATInternet.Callbacks&&ATInternet.Callbacks.hasOwnProperty(a.name)){var g={};g[a.name]={"function":ATInternet.Callbacks[a.name]};e&&k(a.name,g[a.name]["function"]);ATInternet.Tracker.callbackProtos[a.name]||(ATInternet.Tracker.callbackProtos[a.name]=g[a.name])}}})}};var k=this.load=function(c,e){"function"===typeof e?(new e(a),a.emit("Tracker:Callback:Load:"+c+":Ok",{lvl:"INFO",details:{obj:e}})):a.emit("Tracker:Callback:Load:"+
            c+":Error",{lvl:"ERROR",msg:"not a function",details:{obj:e}});return a}},BufferManager=function(a){var e={};this.set=function(a,c,g){g=g||{};g.hitType=g.hitType||["page"];e[a]={value:c,options:g}};var k=function(a,c,e){return(a=window.ATInternet.Utils.cloneSimpleObject(a[c]))&&!e?a.value:a},c=function h(a,b){if(!(a&&b instanceof Array&&a instanceof Array))return[];if(0===a.length)return b;var f=a[0],d,c=[],k=window.ATInternet.Utils.cloneSimpleObject(a);k.shift();for(var q=0;q<b.length;q++)if("object"!==
        typeof f[1])e[b[q]]&&e[b[q]].options[f[0]]===f[1]&&c.push(b[q]);else{d=f[1].length;for(var m=0;m<d;m++)if(e[b[q]]&&e[b[q]].options[f[0]]instanceof Array&&0<=window.ATInternet.Utils.arrayIndexOf(e[b[q]].options[f[0]],f[1][m])){c.push(b[q]);break}}return h(k,c)};this.get=function(a,g){var b={};if("string"===typeof a)b=k(e,a,g);else for(var f=c(a,window.ATInternet.Utils.getObjectKeys(e)),d=0;d<f.length;d++)b[f[d]]=k(e,f[d],g);return b};this.presentInFilters=function g(a,f){return a&&0!==a.length?a[0][0]===
    f?!0:g(a.slice(1),f):!1};this.addInFilters=function b(a,d,c,e){if(!a||0===a.length)return e?[]:[[d,c]];var k=a[0][0],m=a[0][1];k===d&&(m instanceof Array&&!(-1<window.ATInternet.Utils.arrayIndexOf(m,c[0]))&&m.push(c[0]),e=!0);return[[k,m]].concat(b(a.slice(1),d,c,e))};this.del=function(a){e[a]=void 0};this.clear=function(){e={}}},Tag=function(a,e,k){e=e||{};var c=this;c.version="5.9.0";var l=window.ATInternet.Utils.cloneSimpleObject(e);c.triggers=new TriggersManager(c);c.emit=c.triggers.emit;c.onTrigger=
        c.triggers.on;var h=window.ATInternet.Utils.cloneSimpleObject(dfltGlobalCfg)||{},g;for(g in a)a.hasOwnProperty(g)&&(h[g]=a[g]);c.getConfig=function(a){return h[a]};c.setConfig=function(a,f,d){void 0!==h[a]&&d||(c.emit("Tracker:Config:Set:"+a,{lvl:"INFO",details:{bef:h[a],aft:f}}),h[a]=f)};c.configPlugin=function(a,f,d){h[a]=h[a]||{};for(var e in f)f.hasOwnProperty(e)&&void 0===h[a][e]&&(h[a][e]=f[e]);d&&(d(h[a]),c.onTrigger("Tracker:Config:Set:"+a,function(a,b){d(b.details.aft)}));return h[a]};c.getContext=
        function(a){return l[a]};c.setContext=function(a,f){c.emit("Tracker:Context:Set:"+a,{lvl:"INFO",details:{bef:l[a],aft:f}});l[a]=f};c.delContext=function(a,f){c.emit("Tracker:Context:Deleted:"+a+":"+f,{lvl:"INFO",details:{key1:a,key2:f}});if(a)l.hasOwnProperty(a)&&(f?l[a]&&l[a].hasOwnProperty(f)&&(l[a][f]=void 0):l[a]=void 0);else if(f)for(var d in l)l.hasOwnProperty(d)&&l[d]&&l[d].hasOwnProperty(f)&&(l[d][f]=void 0)};c.plugins=new PluginsManager(c);c.buffer=new BufferManager(c);c.setParam=c.buffer.set;
        c.getParams=function(a){return c.buffer.get(a,!1)};c.getParam=c.buffer.get;c.delParam=c.buffer.del;c.builder=new BuildManager(c);c.sendHit=c.builder.send;c.sendUrl=c.builder.sendUrl;c.callbacks=new CallbacksManager(c);c.setParam("ts",function(){return(new Date).getTime()},{permanent:!0,hitType:["all"]});c.getConfig("disableCookie")&&c.setParam("idclient","xxxxxx-NO",{permanent:!0,hitType:["all"]});c.getConfig("medium")&&c.setParam("medium",c.getConfig("medium"),{permanent:!0,hitType:["all"]});c.plugins.init();
        c.callbacks.init();ATInternet.Tracker.instances.push(c);c.emit("Tracker:Ready",{lvl:"INFO",msg:"Tracker initialized",details:{tracker:c,args:{config:a,context:e,callback:k}}});k&&k(c)};ATInternet.Tracker.Tag=Tag;ATInternet.Tracker.instances=[];ATInternet.Tracker.pluginProtos={};
    ATInternet.Tracker.addPlugin=function(a,e){e=e||ATInternet.Tracker.Plugins[a];if(!ATInternet.Tracker.pluginProtos[a]){ATInternet.Tracker.pluginProtos[a]=e;for(var k=0;k<ATInternet.Tracker.instances.length;k++)ATInternet.Tracker.instances[k].plugins.load(a,e)}};ATInternet.Tracker.delPlugin=function(a){if(ATInternet.Tracker.pluginProtos[a]){ATInternet.Tracker.pluginProtos[a]=void 0;for(var e=0;e<ATInternet.Tracker.instances.length;e++)ATInternet.Tracker.instances[e].plugins.unload(a)}};
    ATInternet.Tracker.callbackProtos={};
}).call(window);;(function(){var dfltPluginCfg={"info":true};var dfltGlobalCfg={};window.ATInternet.Tracker.Plugins.Clicks=function(a){var e=function(a){var c="";switch(a){case "exit":c="S";break;case "download":c="T";break;case "action":c="A";break;case "navigation":c="N"}return c},k=function(c){var e=c.name;a.exec("Utils","manageChapters",[c,"chapter",3],function(a){e=a+(e?e:"")});return e},c=function(c){var h={p:k(c),s2:c.level2||"",click:e(c.type)||""},g=a.getContext("page")||{};h.pclick=k(g);h.s2click=g.level2||"";c.customObject&&a.exec("Utils","customObjectToString",[c.customObject],
    function(a){h.stc=a});a.sendHit(h,[["hitType",["click"]]])};a.click={};a.clickListener=this.clickListener={};a.click.send=this.send=function(e){var h=!0;a.plugins.exec("TechClicks","manageClick",[e.elem,e.event,e.callback],function(a){h=a});c(e);return h};a.clickListener.send=this.clickListener.send=function(e){if(e.elem){var h;a.plugins.exec("TechClicks","isFormSubmit",[e.elem],function(a){h=a?"submit":"click"});ATInternet.Utils.addEvtListener(e.elem,h,function(g){a.plugins.exec("TechClicks","manageClick",
    [e.elem,g,e.callback]);c(e)})}};a.click.set=this.set=function(c){a.dispatchSubscribe("click");a.setContext("click",{name:k(c),level2:c.level2||"",customObject:c.customObject});a.setParam("click",e(c.type)||"",{hitType:["click"]})};a.click.onDispatch=this.onDispatch=function(){var c={hitType:["click"]};a.setParam("p",a.getContext("click").name,c);a.setParam("s2",a.getContext("click").level2,c);var e=a.getContext("click").customObject;e&&a.setParam("stc",e,{hitType:["click"],encode:!0});e=a.getContext("page")||
    {};a.setParam("pclick",k(e),c);a.setParam("s2click",e.level2||"",c);a.sendHit(null,[["hitType",["click"]]]);a.setContext("click",void 0)}};window.ATInternet.Tracker.addPlugin("Clicks");
}).call(window);;(function(){var dfltPluginCfg={"domainAttribution":true,"info":true};var dfltGlobalCfg={"redirectionLifetime":30};window.ATInternet.Tracker.Plugins.ContextVariables=function(a){var e="",k=null,c,l="",h="",g={};a.configPlugin("ContextVariables",dfltPluginCfg||{},function(a){g=a});a.setConfig("redirectionLifetime",dfltGlobalCfg.redirectionLifetime,!0);var b=function(d,b,c){var f=null;a.plugins.exec(d,b,c,function(a){f=a});return f},f=function(a,d){return b("Utils",a,d)},d=function(d,b){var c=null;a.plugins.exec("Cookies",d,b,function(a){c=a});return c},n=function(){a.setParam("hl",function(){var a=new Date;return a.getHours()+
    "x"+a.getMinutes()+"x"+a.getSeconds()},{permanent:!0,hitType:["all"]})},s=function(a){var d="",d=c?c:"acc_dir"===e?"":null!=e?e:"acc_dir"===k?"":k?k:a.referrer;return d.replace(/[<>]/g,"").substring(0,1600).replace(/&/g,"$")};a.plugins.waitForDependencies(["Cookies","Utils"],function(){l="set"+(g.domainAttribution?"":"Private");h="get"+(g.domainAttribution?"":"Private");var b=f("getLocation",[]);e=f("getQueryStringValue",["xtref",b]);void 0===e&&(e="");c=a.getContext("forcedReferer");if(a.getConfig("redirect")){var b=
    f("getDocumentLevel",[]),b=c?c:null!=e?e:b.referrer||"acc_dir",m;if(m=b){m={path:"/",end:a.getConfig("redirectionLifetime")};var p=d(h,["atredir"]);null!==p?m="object"===typeof p&&!(p instanceof Array):(d(l,["atredir",{},m]),m=!0)}m&&d(l,[["atredir","ref"],b])}else{k=d(h,[["atredir","ref"]]);d("del",[["atredir","ref"]]);a.setParam("vtag",a.version,{permanent:!0,hitType:["all"]});a.setParam("ptag","js",{permanent:!0,hitType:["all"]});b="";try{b+=window.screen.width+"x"+window.screen.height+"x"+window.screen.pixelDepth+
    "x"+window.screen.colorDepth}catch(u){}a.setParam("r",b,{permanent:!0,hitType:["all"]});b="";window.innerWidth?b+=window.innerWidth+"x"+window.innerHeight:document.body&&document.body.offsetWidth&&(b+=document.body.offsetWidth+"x"+document.body.offsetHeight);a.setParam("re",b,{permanent:!0,hitType:["all"]});n();a.setParam("lng",navigator.language||navigator.userLanguage,{permanent:!0,hitType:["all"]});b=ATInternet.Utils.uuid().num(13);a.setParam("idp",b,{permanent:!0,hitType:["page","clickzone"]});
    a.setParam("jv",navigator.javaEnabled()?"1":"0",{hitType:["page"]});b=f("getDocumentLevel",[]);a.setParam("ref",s(b),{permanent:!0,last:!0,hitType:["page"]})}a.emit("ContextVariables:Ready",{lvl:"INFO"})})};window.ATInternet.Tracker.addPlugin("ContextVariables");
}).call(window);;(function(){var dfltPluginCfg={"info":false};var dfltGlobalCfg={};window.ATInternet.Tracker.Plugins.Cookies=function(a){var e={},k={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b="",d,c,f,e,g,n,h=0;for(a=k._utf8_encode(a);h<a.length;)d=a.charCodeAt(h++),c=a.charCodeAt(h++),f=a.charCodeAt(h++),e=d>>2,d=(d&3)<<4|c>>4,g=(c&15)<<2|f>>6,n=f&63,isNaN(c)?g=n=64:isNaN(f)&&(n=64),b=b+this._keyStr.charAt(e)+this._keyStr.charAt(d)+this._keyStr.charAt(g)+this._keyStr.charAt(n);return b},decode:function(a){var b="",d,c,f,
        e,g,n=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");n<a.length;)d=this._keyStr.indexOf(a.charAt(n++)),c=this._keyStr.indexOf(a.charAt(n++)),e=this._keyStr.indexOf(a.charAt(n++)),g=this._keyStr.indexOf(a.charAt(n++)),d=d<<2|c>>4,c=(c&15)<<4|e>>2,f=(e&3)<<6|g,b+=String.fromCharCode(d),64!=e&&(b+=String.fromCharCode(c)),64!=g&&(b+=String.fromCharCode(f));return b=k._utf8_decode(b)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",d=0;d<a.length;d++){var c=a.charCodeAt(d);128>c?b+=String.fromCharCode(c):
        (127<c&&2048>c?b+=String.fromCharCode(c>>6|192):(b+=String.fromCharCode(c>>12|224),b+=String.fromCharCode(c>>6&63|128)),b+=String.fromCharCode(c&63|128))}return b},_utf8_decode:function(a){for(var b="",d=0,c,f,e;d<a.length;)c=a.charCodeAt(d),128>c?(b+=String.fromCharCode(c),d++):191<c&&224>c?(f=a.charCodeAt(d+1),b+=String.fromCharCode((c&31)<<6|f&63),d+=2):(f=a.charCodeAt(d+1),e=a.charCodeAt(d+2),b+=String.fromCharCode((c&15)<<12|(f&63)<<6|e&63),d+=3);return b}},c=this.getCookie=function(b){return!a.getConfig("disableCookie")&&
b&&"string"===typeof b&&(b=RegExp("(?:^| )"+b+"=([^;]+)").exec(document.cookie)||null)?(b=b[1],b=a.getConfig("base64Storage")?k.decode(b):decodeURIComponent(b),b):null},l=this.setCookie=function(b,d,c){if(!a.getConfig("disableCookie")&&b&&"string"===typeof b&&"string"===typeof d){var f=a.getConfig("cookieDomain");b+="=";d=a.getConfig("base64Storage")?k.encode(d):encodeURIComponent(d);d=b+d;b=!1;if(c){b=c.secure;var e=c.end,g=c.domain;c=c.path;d+=e?"function"===typeof e.toGMTString?";expires="+e.toGMTString():
    "number"===typeof e?";max-age="+e.toString():"":"";d=d+(f||g?";domain="+(g?g:f):"")+(c&&"string"===typeof c?";path="+c:"")}f=a.getConfig("cookieSecure")||b;d+=f&&"boolean"===typeof f?";secure":"";document.cookie=d;return!0}return null},h=function(a){var b=null;(a=c(a))&&(b=ATInternet.Utils.jsonParse(a));return b},g=function(a){return l(a.name,ATInternet.Utils.jsonSerialize(a),a.options)?a:null},b=function(a,b,d){var c=null;if(!d&&e[a])c=e[a];else if(c=h(a))c.options.session&&g(c),e[a]=c;return c?
    b?(a=null,!c||"object"!==typeof c.val||c.val instanceof Array||void 0===c.val[b]||(a=c.val[b]),a):c.val:null},f=function(a,b,d,c){var f=null;if(b){if(f=h(a))c=f,!c||"object"!==typeof c.val||c.val instanceof Array?f=null:(c.val[b]=d,f=c),f&&(f=g(f))}else b=c=c||{},c={},c.name=a,c.val=d,b.session&&"number"===typeof b.session&&(b.end=b.session),c.options=b,f=g(c);f&&(e[a]=f);return f?f.val:null},d=function(a,b){b?f(a,b,void 0):(e[a]=void 0,l(a,"",{end:0}))},n=this.get=function(a,d){d=d||!1;return a instanceof
Array&&2===a.length?b(a[0],a[1],d):b(a,void 0,d)};this.getPrivate=function(b,d){d=d||!1;b instanceof Array?b[0]+=a.getConfig("site"):b+=a.getConfig("site");return n(b,d)};var s=this.set=function(a,b,d){return a instanceof Array?f(a[0],a[1],b):f(a,null,b,d)};this.setPrivate=function(b,d,c){b instanceof Array?b[0]+=a.getConfig("site"):b+=a.getConfig("site");return s(b,d,c)};var q=this.del=function(a){return a instanceof Array?d(a[0],a[1]):d(a)};this.delPrivate=function(b){b instanceof Array?b[0]+=a.getConfig("site"):
    b+=a.getConfig("site");return q(b)};this.cacheInvalidation=function(){e={}}};window.ATInternet.Tracker.addPlugin("Cookies");
}).call(window);;(function(){var dfltPluginCfg={"lifetime":182,"domainAttribution":true,"info":true};var dfltGlobalCfg={"redirectionLifetime":30};window.ATInternet.Tracker.Plugins.IdentifiedVisitor=function(a){var e=null,k=null,c=null,l=null,h="",g="",b=null,f=null,d="",n="",s={};a.configPlugin("IdentifiedVisitor",dfltPluginCfg||{},function(a){s=a});a.setConfig("redirectionLifetime",dfltGlobalCfg.redirectionLifetime,!0);var q=function(b,d,c){var f=null;a.plugins.exec(b,d,c,function(a){f=a});return f},m=function(a,b){return q("Utils",a,b)},p=function(b,d){var c=null;a.plugins.exec("Cookies",b,d,function(a){c=a});return c},u=function(a,b){var c=
    p(n,[a]);if(null!==c)return"object"===typeof c&&!(c instanceof Array);p(d,[a,{},b]);return!0},z=function(){var d=function(a,b){/-/.test(b)?(a.category=b.split("-")[0],a.id=b.split("-")[1]):a.id=b},n={category:"",id:""};d(n,g||f);var l={category:"",id:""};d(l,h||b);l.id?(l.category&&r("ac",l.category),r("at",l.id)):e&&a.setParam("at",e,{hitType:["all"],permanent:!0});n.id?(n.category&&r("ac",n.category),r("an",n.id)):k&&a.setParam("anc",c+"-"+k,{hitType:["all"],permanent:!0})},y=function(a,b){u("atidvisitor",
    {path:"/",session:86400*s.lifetime})&&p(d,[["atidvisitor",a],b])},r=function(b,d){a.setParam(b,d,{hitType:["all"],permanent:!0});y(b,d)};a.plugins.waitForDependencies(["Cookies","Utils"],function(){d="set"+(s.domainAttribution?"":"Private");n="get"+(s.domainAttribution?"":"Private");var q=m("getLocation",[]);h=m("getQueryStringValue",["xtat",q]);g=m("getQueryStringValue",["xtan",q]);a.getConfig("redirect")?(h||g)&&u("atredir",{path:"/",end:a.getConfig("redirectionLifetime")})&&(g&&p(d,[["atredir",
    "an"],g]),h&&p(d,[["atredir","at"],h])):(b=p(n,[["atredir","at"]]),f=p(n,[["atredir","an"]]),p("del",[["atredir","at"]]),p("del",[["atredir","an"]]),e=p(n,[["atidvisitor","at"]]),k=p(n,[["atidvisitor","an"]]),c=p(n,[["atidvisitor","ac"]]),l=p(n,[["atidvisitor","vrn"]]),z(),q="-"+a.getConfig("site")+"-",RegExp(q).test(l)||(l=(l||"")+q,y("vrn",l),q=a.getContext("page")||{},q.vrn=1,a.setContext("page",q)));a.emit("IdentifiedVisitor:Ready",{lvl:"INFO",details:{cookieRedirectTextual:b,cookieRedirectNumeric:f,
        cookieTextual:e,cookieNumeric:k,cookieCategory:c,cookieVrn:l}})});a.identifiedVisitor={};a.identifiedVisitor.set=this.set=function(a){var b=a.id;a=a.category;"number"===typeof b?r("an",b.toString()):r("at",b);"undefined"!==typeof a&&r("ac",a)};a.identifiedVisitor.unset=this.unset=function(){for(var b=["an","at","ac"],d=0;d<b.length;d++)a.exec("Cookies","set",[["atidvisitor",b[d],{path:"/"}],void 0]),a.delParam(b[d]);a.delParam("anc")}};window.ATInternet.Tracker.addPlugin("IdentifiedVisitor");
}).call(window);;(function(){var dfltPluginCfg={"urlKeyword":"","urlResultPageNumber":"","urlResultPosition":"","info":true};var dfltGlobalCfg={};window.ATInternet.Tracker.Plugins.InternalSearch=function(a){var e={};a.configPlugin("InternalSearch",dfltPluginCfg||{},function(a){e=a});var k=function(c){var e={np:"undefined"!==typeof c.resultPageNumber?c.resultPageNumber:"1",click:"IS"};c.hasOwnProperty("keyword")&&(e.mc=c.keyword);c.hasOwnProperty("resultPosition")&&(e.mcrg=c.resultPosition);a.sendHit(e,[["hitType",["InternalSearch"]]])};a.internalSearch={};a.internalSearch.set=this.set=function(c){var e={},h=e;c.hasOwnProperty("keyword")&&(h.keyword=
    c.keyword);h=e;c.hasOwnProperty("resultPageNumber")&&(h.resultPageNumber=c.resultPageNumber);c=a.getContext("InternalSearch")||{};e=ATInternet.Utils.completeFstLevelObj(e,c);"undefined"===typeof e.resultPageNumber&&(e.resultPageNumber="1");a.setContext("InternalSearch",e)};a.internalSearch.send=this.send=function(c){var e=!0;a.plugins.exec("TechClicks","manageClick",[c.elem,c.event,c.callback],function(a){e=a});k(c);return e};a.plugins.waitForDependencies(["Utils"],function(){var c;if(e.urlKeyword){var l=
    document.location.href;c={};a.plugins.exec("Utils","getQueryStringValue",[e.urlKeyword,l],function(h){h&&(c.keyword=h);e.urlResultPageNumber&&a.plugins.exec("Utils","getQueryStringValue",[e.urlResultPageNumber,l],function(a){c.resultPageNumber=a||"1"})})}c&&a.setContext("InternalSearch",c);a.emit("InternalSearch:Ready",{lvl:"INFO",details:{config:{urlKeyword:e.urlKeyword,urlResultPageNumber:e.urlResultPageNumber},url:l,data:c}})})};window.ATInternet.Tracker.addPlugin("InternalSearch");
}).call(window);;(function(){var dfltPluginCfg={"info":true};var dfltGlobalCfg={};window.ATInternet.Tracker.Plugins.OnSiteAds=function(a){var e="",k=function(b){var d=b.name;a.exec("Utils","manageChapters",[b,"chapter",3],function(a){d=a+(d?d:"")});return d},c=function(a,b){return a[b]?a[b]:""},l=function(a,b){var d=c(a,b);if(d){var e=c(a,"prefix");if(d.campaignId){var e=e||"PUB",f=c(d,"campaignId"),g=c(d,"creation"),h=c(d,"variant"),l=c(d,"format"),k=c(d,"generalPlacement"),v=c(d,"detailedPlacement"),x=c(d,"advertiserId"),d=c(d,"url");return e+"-"+f+"-"+g+"-"+h+"-"+l+"-"+k+"-"+
    v+"-"+x+"-"+d}if(d.adId)return e=e||"INT",f=c(d,"adId"),g=c(d,"format"),d=c(d,"productId"),e+"-"+f+"-"+g+"||"+d}},h=function(b){var d=a.getContext("page")||{};a.sendHit({atc:l(b,"click"),type:"AT",patc:k(d),s2atc:d.level2||"",stc:b.customObject||""},[["hitType",["onSiteAdsClick"]]])},g=function(b){a.sendHit({ati:l(b,"impression"),type:"AT",stc:b.customObject||""},[["hitType",["onSiteAdsImpression"]]])},b=function(b,d){var c=a.buffer.get("ati",!0)||{};c.value="string"===typeof c.value?[c.value]:c.value||
    [];c.options=c.options||{hitType:[d,"page"]};c.value.push(b);a.buffer.set("ati",c.value,c.options)},f=function(b,d){b.click?a.setParam("atc",l(b,"click"),{hitType:[d,"page"]}):b.impression&&a.setParam("ati",l(b,"impression"),{hitType:[d,"page"]});if(b.customObject){a.setContext("onsiteads",{customObject:b.customObject});var c=a.getContext("page")||{};c.customObject=ATInternet.Utils.completeFstLevelObj(c.customObject,b.customObject,!1);a.setContext("page",c)}a.dispatchSubscribe("onSiteAds")};a.selfPromotion=
    this.selfPromotion={};a.publisher=this.publisher={};a.publisher.set=this.publisher.set=function(a){f(a,"publisher")};a.selfPromotion.set=this.selfPromotion.set=function(a){f(a,"selfPromotion")};a.publisher.add=this.publisher.add=function(d){b(l(d,"impression"),"publisher");a.dispatchSubscribe("onSiteAds")};a.selfPromotion.add=this.selfPromotion.add=function(d){b(l(d,"impression"),"selfPromotion");a.dispatchSubscribe("onSiteAds")};var d=this.advertEvent=function(b){var d=!0;a.exec("TechClicks","manageClick",
    [b.elem,b.event,b.callback],function(a){d=a});b.click?h(b):b.impression&&g(b);return d};a.publisher.send=this.publisher.send=function(a){return d(a)};a.selfPromotion.send=this.selfPromotion.send=function(a){return d(a)};a.onSiteAds={};a.onSiteAds.onDispatch=this.onDispatch=function(){if(!a.dispatchSubscribed("page")){var b=a.getContext("page")||{};a.setParam("type","AT",{hitType:["publisher","selfPromotion"]});a.getParam("atc")&&(a.setParam("patc",k(b),{hitType:["publisher","selfPromotion"]}),a.setParam("s2atc",
    b.level2||"",{hitType:["publisher","selfPromotion"]}));(b=a.getContext("onsiteads"))&&b.customObject&&a.setParam("stc",b.customObject,{encode:!0,hitType:["publisher","selfPromotion"]});a.sendHit(null,[["hitType",["publisher","selfPromotion"]]])}};a.plugins.waitForDependencies(["Utils","TechClicks"],function(){e=document.location.href;a.plugins.exec("Utils","getQueryStringValue",["xtatc",e],function(b){b&&a.setParam("atc",b,{hitType:["publisher","selfPromotion","page"]})});a.emit("OnSiteAds:Ready",
    {lvl:"INFO",details:{href:e}})})};window.ATInternet.Tracker.addPlugin("OnSiteAds");
}).call(window);;(function(){var dfltPluginCfg={"info":true};var dfltGlobalCfg={};window.ATInternet.Tracker.Plugins.Page=function(a){var e=["pageId","chapterLabel","update"],k=["pid","pchap","pidt"],c=["page","site"],l=["f","x"],h=function(b){var d=b.name;a.exec("Utils","manageChapters",[b,"chapter",3],function(a){d=a+(d?d:"")});return d},g=function(a,b,d){b?a=b:a||"undefined"===typeof d||(a=d);return a},b=function(a,b,d){b.hasOwnProperty(d)&&(a[d]=g(a[d],b[d]))},f=function(b){if(!ATInternet.Utils.isPreview()||a.getConfig("preview"))ATInternet.Utils.isPrerender(function(a){b(a)})||
b()},d=function(b,d,e){if(d)for(var f=0;f<c.length;f++)if(d.hasOwnProperty(c[f])&&d[c[f]])for(var g in d[c[f]])d[c[f]].hasOwnProperty(g)&&(e?b[l[f]+g]=d[c[f]][g]:a.setParam(l[f]+g,d[c[f]][g]))},n=function(b,d,c){if(d){a.exec("Utils","manageChapters",[d,"chapter",3],function(a){a&&(d.chapterLabel=a.replace(/::$/gi,""))});for(var f=0;f<k.length;f++)d.hasOwnProperty(e[f])&&(c?b[k[f]]=d[e[f]]:a.setParam(k[f],d[e[f]]))}},s=function(b,d,c){if(d&&d.keywords instanceof Array){var e=d.keywords.length;if(0<
    e){for(var f="",g=0;g<e;g++)f+="["+d.keywords[g]+"]"+(g<e-1?"|":"");c?b.tag=f:a.setParam("tag",f)}}},q=function(b,d,c){if(d){var f,e=function(a){return a?a:"0"};f=""+(e(d.category1)+"-");f+=e(d.category2)+"-";f+=e(d.category3);c?b.ptype=f:a.setParam("ptype",f)}},m=function(b,d,c){if(d)for(var f in d)d.hasOwnProperty(f)&&"undefined"!==typeof d[f]&&(c?b[f]=d[f]:a.setParam(f,d[f]))};a.customVars=this.customVars={};a.customVars.set=this.customVars.set=function(b){var d=a.getContext("page")||{},c=d.customVars;
    if(c){if(b)for(var f in b)b.hasOwnProperty(f)&&(c[f]=ATInternet.Utils.completeFstLevelObj(c[f],b[f],!0))}else c=b;d.customVars=c;a.setContext("page",d)};a.dynamicLabel=this.dynamicLabel={};a.dynamicLabel.set=this.dynamicLabel.set=function(b){var d=a.getContext("page")||{};d.dynamicLabel=ATInternet.Utils.completeFstLevelObj(d.dynamicLabel,b,!0);a.setContext("page",d)};a.tags=this.tags={};a.tags.set=this.tags.set=function(b){var d=a.getContext("page")||{};d.tags=ATInternet.Utils.completeFstLevelObj(d.tags,
    b,!0);a.setContext("page",d)};a.customTreeStructure=this.customTreeStructure={};a.customTreeStructure.set=this.customTreeStructure.set=function(b){var d=a.getContext("page")||{};d.customTreeStructure=ATInternet.Utils.completeFstLevelObj(d.customTreeStructure,b,!0);a.setContext("page",d)};a.page={};a.page.reset=this.reset=function(){a.setContext("page",void 0)};a.page.set=this.set=function(d){a.dispatchSubscribe("page");var c=a.getContext("page")||{};c.name=g(c.name,d.name,"");c.level2=g(c.level2,
    d.level2,"");b(c,d,"chapter1");b(c,d,"chapter2");b(c,d,"chapter3");c.customObject=ATInternet.Utils.completeFstLevelObj(c.customObject,d.customObject,!0);a.setContext("page",c)};a.page.send=this.send=function(c){var e={p:h(c),s2:c.level2||""},l=!0,k=c.customObject;if(k){var r=a.getParam("stc",!0);if(r&&r.options.permanent){var v=r?r.options.hitType:[],x=ATInternet.Utils.arrayIndexOf;if(-1!=x(v,"page")||-1!=x(v,"all"))k=ATInternet.Utils.completeFstLevelObj(r.value||{},k,!0)}a.exec("Utils","customObjectToString",
    [k],function(a){e.stc=a})}k=a.getContext("page")||{};k.vrn&&(e.vrn=k.vrn,k.vrn=void 0,a.setContext("page",k));r=a.getContext("InternalSearch")||{};"undefined"!=typeof r.keyword&&(e.mc=ATInternet.Utils.cloneSimpleObject(r.keyword),"undefined"!=typeof r.resultPageNumber&&(e.np=ATInternet.Utils.cloneSimpleObject(r.resultPageNumber)),a.setContext("InternalSearch",void 0));ATInternet.Utils.isPreview()&&a.getConfig("preview")&&(e.pvw=1);d(e,c.customVars,!0);n(e,c.dynamicLabel,!0);s(e,c.tags,!0);q(e,c.customTreeStructure,
    !0);r=a.getContext("campaigns")||{};m(e,r,!0);a.setContext("campaigns",void 0);a.exec("TechClicks","manageClick",[c.elem,c.event,c.callback],function(a){l=a});f(function(){a.sendHit(e)});k.name=g(k.name,c.name,"");k.level2=g(k.level2,c.level2,"");b(k,c,"chapter1");b(k,c,"chapter2");b(k,c,"chapter3");a.setContext("page",k);return l};a.page.onDispatch=this.onDispatch=function(){var b=a.getContext("page")||{},c=a.getContext("InternalSearch")||{};a.setParam("p",h(b));a.setParam("s2",b.level2||"");b.vrn&&
(a.setParam("vrn",b.vrn),b.vrn=void 0,a.setContext("page",b));"undefined"!=typeof c.keyword&&(a.setParam("mc",ATInternet.Utils.cloneSimpleObject(c.keyword)),"undefined"!=typeof c.resultPageNumber&&a.setParam("np",ATInternet.Utils.cloneSimpleObject(c.resultPageNumber)),a.setContext("InternalSearch",void 0));ATInternet.Utils.isPreview()&&a.getConfig("preview")&&a.setParam("pvw",1);d(null,b.customVars,!1);n(null,b.dynamicLabel,!1);s(null,b.tags,!1);q(null,b.customTreeStructure,!1);c=a.getContext("campaigns")||
    {};m(null,c,!1);a.setContext("campaigns",void 0);var b=b.customObject,e=[["hitType",["page"]]];if(b)if(c=a.getParam("stc",!0)){var g=c.options.hitType||[],l=ATInternet.Utils.arrayIndexOf,l=-1!=l(g,"page")||-1!=l(g,"all"),g=c.options.permanent;l?(l=ATInternet.Utils.cloneSimpleObject(c),l.value=ATInternet.Utils.completeFstLevelObj(l.value||{},b,!0),a.setParam("stc",l.value,{encode:!0}),f(function(){a.sendHit(null,e)}),g&&a.setParam("stc",c.value,c.options)):(a.setParam("stc",b,{encode:!0}),f(function(){a.sendHit(null,
    e)}),a.setParam("stc",c.value,c.options))}else a.setParam("stc",b,{encode:!0}),f(function(){a.sendHit(null,e)});else f(function(){a.sendHit(null,e)})}};window.ATInternet.Tracker.addPlugin("Page");
}).call(window);;(function(){var dfltPluginCfg={"info":true};var dfltGlobalCfg={};window.ATInternet.Tracker.Plugins.RichMedia=function(a){var e=new function(){this._timeout={};this.setTimeout=function(b,c,d){this._timeout[b]=this._timeout[b]||{};this._timeout[b][c]=window.setTimeout(function(){a.richMedia.send({action:"refresh",playerId:b,mediaLabel:c})},1E3*d)};this.setTimeoutObject=function(b,c,d){this._timeout[b]=this._timeout[b]||{};if("undefined"===typeof this._timeout[b][c]){var e=[],h;for(h in d)d.hasOwnProperty(h)&&e.push({delay:g(h,0),refresh:g(d[h],5)});e.sort(function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          b){return a.delay<b.delay?-1:a.delay>b.delay?1:0});this._timeout[b][c]={arrObj:e}}d=this._timeout[b][c];if(0<d.arrObj.length&&(e=d.arrObj[0].delay,h=d.arrObj[0].refresh,"number"===typeof e&&"number"===typeof h&&0<h)){d[e]=d[e]||{};var l=void 0;"undefined"!==typeof d.arrObj[1]&&(l=d.arrObj[1].delay);var k=0;"undefined"===typeof l?k=1:"number"===typeof d[e].num?k=Math.max(d[e].num-1,0):"number"===typeof l&&(k=Math.floor(60*(l-e)/h));d[e].num=k;0<k?d[e].timeout=window.setTimeout(function(){a.richMedia.send({action:"refresh",
    playerId:b,mediaLabel:c})},1E3*h):"undefined"!==typeof d[e].timeout&&(window.clearTimeout(d[e].timeout),d[e].timeout=void 0,d.arrObj.splice(0,1),window.setTimeout(function(){a.richMedia.send({action:"refresh",playerId:b,mediaLabel:c})},1E3*h));this._timeout[b][c]=d}};this.clearTimeout=function(a,c){this._timeout[a]=this._timeout[a]||{};if("object"===typeof this._timeout[a][c])for(var d in this._timeout[a][c]){if(this._timeout[a][c].hasOwnProperty(d)){var e=this._timeout[a][c][d].num;"undefined"!==
typeof e&&0<e&&(window.clearTimeout(this._timeout[a][c][d].timeout),this._timeout[a][c][d].timeout=void 0)}}else window.clearTimeout(this._timeout[a][c])};this.removePlayer=function(b){for(var c in this._timeout[b])this._timeout[b].hasOwnProperty(c)&&(this.clearTimeout(b,c),a.richMedia.send({action:"stop",playerId:b,mediaLabel:c}));this._timeout[b]={}};this.removeAll=function(){for(var a in this._timeout)this._timeout.hasOwnProperty(a)&&this.removePlayer(a);this._timeout={}}},k=new function(){this._media=
    function(){this.m9=this.m6=this.m5=this.m1=this.rfsh=this.buf=this.a=this.p=this.clnk=this.s2=this.plyr=this.type=""};this._mediaAll={};this.setMediaProperty=function(a,c,d,e){this._mediaAll[a]=this._mediaAll[a]||{};this._mediaAll[a][c]=this._mediaAll[a][c]||new this._media;this._mediaAll[a][c][d]=e};this.getMediaProperty=function(a,c,d){return this._mediaAll[a]&&this._mediaAll[a][c]?this._mediaAll[a][c][d]:""};this.removePlayer=function(a){this._mediaAll[a]={}};this.removeAll=function(){this._mediaAll=
    {}}},c=function(b,c,d){var e=b[d]||"";a.exec("Utils","manageChapters",[b,c,3],function(a){e=a+e});return e},l=function(a,c,d,e){"boolean"===typeof a[c]&&a[c]&&(d=e);return d},h=function(a){var c=0;/^(\-|\+)?([0-9]+)$/.test(a)&&(c=Number(a));return c},g=function(a,c){var d=parseInt(a,10);return d?Math.max(d,c):0};a.richMedia={};a.richMedia.add=this.add=function(a){a=a||{};var e=h(a.playerId),d=c(a,"mediaTheme","mediaLabel"),g=l(a,"isBuffering","0","1"),s=l(a,"isEmbedded","int","ext");k.setMediaProperty(e,
    d,"plyr",e);k.setMediaProperty(e,d,"type",a.mediaType||"");k.setMediaProperty(e,d,"s2",a.mediaLevel2||"");k.setMediaProperty(e,d,"p",d);k.setMediaProperty(e,d,"clnk",a.previousMedia||"");k.setMediaProperty(e,d,"a",a.action||"");k.setMediaProperty(e,d,"buf",g);k.setMediaProperty(e,d,"rfsh",a.refreshDuration||"");k.setMediaProperty(e,d,"m1",a.duration||"");k.setMediaProperty(e,d,"m5",s);k.setMediaProperty(e,d,"m6",a.broadcastMode||"");k.setMediaProperty(e,d,"m9",a.webdomain||"")};a.richMedia.remove=
    this.remove=function(a){e.removePlayer(a);k.removePlayer(a)};a.richMedia.removeAll=this.removeAll=function(){e.removeAll();k.removeAll()};a.richMedia.send=this.send=function(b){b=b||{};var f=h(b.playerId),d=c(b,"mediaTheme","mediaLabel"),n={},s=l(b,"isBuffering","0","1");n.type=k.getMediaProperty(f,d,"type");n.plyr=f;n.p=d;n.a=b.action||"";n.s2=k.getMediaProperty(f,d,"s2");n.m1=k.getMediaProperty(f,d,"m1");n.m5=k.getMediaProperty(f,d,"m5");n.m6=k.getMediaProperty(f,d,"m6");if("play"===n.a||"info"===
    n.a)n.buf=s,b=a.getContext("page")||{},n.prich=c(b,"chapter","name"),n.s2rich=b.level2||"",n.clnk=k.getMediaProperty(f,d,"clnk"),n.m9=encodeURIComponent(k.getMediaProperty(f,d,"m9"));a.sendHit(n,[["hitType",["richmedia"]]]);"pause"!==n.a&&"stop"!==n.a||e.clearTimeout(f,d);if("play"===n.a||"refresh"===n.a)n=k.getMediaProperty(f,d,"rfsh"),"object"===typeof n?e.setTimeoutObject(f,d,n):(n=g(n,5),0!==n&&e.setTimeout(f,d,n))}};window.ATInternet.Tracker.addPlugin("RichMedia");
}).call(window);;(function(){var dfltPluginCfg={"clicksAutoManagementEnabled":true,"clicksAutoManagementTimeout":500,"info":false};var dfltGlobalCfg={};window.ATInternet.Tracker.Plugins.TechClicks=function(a){var e,k;a.configPlugin("TechClicks",dfltPluginCfg||{},function(a){e=a.clicksAutoManagementEnabled;k=a.clicksAutoManagementTimeout});this.deactivateAutoManagement=function(){e=!1};var c=function(a){switch(a.target){case "_top":window.top.location.href=a.url;break;case "_parent":window.parent.location.href=a.url;break;default:window.location.href=a.url}},l=function(a){var b=a.timeout;a.mailto?setTimeout(function(){window.location.href=a.mailto},
    b):a.form?setTimeout(function(){a.form.submit()},b):a.url&&setTimeout(function(){c({url:a.url,target:a.target})},b)},h=function(b){for(var e,f="_self",g=b.timeoutonly;b;){if(b.href&&0===b.href.indexOf("http")){e=b.href.split('"').join('\\"');f=b.target?b.target:f;break}b=b.parentNode}if(e){if(!g)a.onTrigger("Tracker:Hit:Sent:Ok",function(){c({url:e,target:f})});l({url:e,target:f,timeout:k})}},g=function(b){var c=b;for(b=c.timeoutonly;c&&"FORM"!==c.nodeName;)c=c.parentNode;if(c){if(!b)a.onTrigger("Tracker:Hit:Sent:Ok",
    function(){c.submit()});l({form:c,timeout:k})}},b=function(b){var c=b;for(b=c.timeoutonly;c&&!(c.href&&0<=c.href.indexOf("mailto:"));)c=c.parentNode;if(c){if(!b)a.onTrigger("Tracker:Hit:Sent:Ok",function(){window.location.href=c.href});l({mailto:c.href,timeout:k})}},f=function(a){for(;a;){if(a.href){if(0<=a.href.indexOf("mailto:"))return"mailto";if(0===a.href.indexOf("http"))return"redirection"}else if("FORM"===a.nodeName)return"form";a=a.parentNode}return!1};this.manageClick=function(a,c,l){var k=
    !0;if(e&&a){var m;a:{for(m=a;m;){if("function"===typeof m.getAttribute&&("_blank"===m.getAttribute("target")||"no"===m.getAttribute("data-atclickmanagement"))){m=!0;break a}m=m.parentNode}m=a;for(var p=window.location.href,u;m;){if((u=m.href)&&0<u.indexOf("#")&&p.substring(0,0<p.indexOf("#")?p.indexOf("#"):p.length)===u.substring(0,u.indexOf("#"))){m=!0;break a}m=m.parentNode}m=!1}p=f(a);if(!m&&p)switch(p){case "mailto":b(a);k=!1;break;case "form":g(a);k=!1;break;case "redirection":h(a),k=!1}}c&&
(a=c.defaultPrevented,"function"===typeof c.isDefaultPrevented&&(a=c.isDefaultPrevented()),a||c.preventDefault&&c.preventDefault());l&&l();return k}};window.ATInternet.Tracker.addPlugin("TechClicks");
}).call(window);;(function(){var dfltPluginCfg={"info":false};var dfltGlobalCfg={};window.ATInternet.Tracker.Plugins.Utils=function(a){var e=this,k={};e.getQueryStringValue=function(a,c){var e=window.ATInternet.Utils.hashcode(c).toString();if(!k[e]){k[e]={};var b=RegExp("[&#?]{1}([^&=#?]*)=([^&#]*)?","g"),f=b.exec(c);if(null!==f)for(;null!==f;)k[e][f[1]]=f[2],f=b.exec(c)}return k[e].hasOwnProperty(a)?k[e][a]:null};e.customObjectToString=function(a){return encodeURIComponent(window.ATInternet.Utils.jsonSerialize(a))};e.manageChapters=function(c,e,g){var b=a.getConfig("ignoreEmptyChapterValue"),
    f="";if(c){g=parseInt(g,10);for(var d=1;d<g+1;d++)var k=c[e+d]||"",f=b?f+(k?k+"::":""):f+(c.hasOwnProperty(e+d)?k+"::":"")}return f};e.getDocumentLevel=function(){var c=a.getConfig("documentLevel");if(0>c.indexOf("."))return window[c]||document;c=c.split(".");return window[c[0]][c[1]]||document};e.getLocation=function(){return e.getDocumentLevel().location.href};a.dispatchIndex={};a.dispatchStack=[];a.dispatchEventFor={};var c=0;a.dispatchSubscribe=function(c){return a.dispatchIndex[c]?!1:(a.dispatchStack.push(c),
    a.dispatchIndex[c]=!0)};a.dispatchSubscribed=function(c){return!0===a.dispatchIndex[c]};a.addSpecificDispatchEventFor=function(e){return a.dispatchEventFor[e]?!1:(a.dispatchEventFor[e]=!0,c++,!0)};a.processSpecificDispatchEventFor=function(e){a.dispatchEventFor[e]&&(a.dispatchEventFor[e]=!1,c--,0===c&&(a.dispatchEventFor={},a.emit("Tracker:Plugin:SpecificEvent:Exec:Complete",{lvl:"INFO"})))};a.dispatch=function(){var e=function(){for(;0<a.dispatchStack.length;){var c=a.dispatchStack.pop();a[c].onDispatch()}a.dispatchIndex=
    {};a.delContext(void 0,"customObject")},h=function(){if(a.plugins.isExecWaitingLazyloading())a.onTrigger("Tracker:Plugin:Lazyload:Exec:Complete",function(){e()},!0);else e()};if(0===c)h();else a.onTrigger("Tracker:Plugin:SpecificEvent:Exec:Complete",function(){h()},!0)};a.dispatchRedirect=function(c){var e=!0;c&&c.elem&&(c.elem.timeoutonly=!0,a.plugins.exec("TechClicks","manageClick",[c.elem,c.event,c.callback],function(a){e=a}));a.dispatch();return e}};window.ATInternet.Tracker.addPlugin("Utils");
}).call(window);
if(typeof window.ATInternet.onTrackerLoad==='function'){window.ATInternet.onTrackerLoad();}

/**
 * @author Jonatan Jumbert
 * @contact hola@jonatanjumbert.com <http://jonatanjumbert.com>
 * @lastchange 04/01/2018 Si el nombre del click viene vacio no se envian datos a AT-Internet.
 * @version 1.1.3
 */

if(!window.console) console = { log: function(){} };

function ATInternet() {
    this.instance = null;
    this.debugEnabled = false;

    /**
     * Recupera los parametros del Query String. Por ejemplo: ?foo=lorem&bar=&baz
     *	var foo = getParameterByName('foo'); // "lorem"
     *	var bar = getParameterByName('bar'); // "" (present with empty value)
     *	var baz = getParameterByName('baz'); // "" (present with no value)
     *	var qux = getParameterByName('qux'); // null (absent)
     *
     * @see http://stackoverflow.com/questions/901115/how-can-i-get-query-string-values-in-javascript
     */
    var getParameterByName = function(name, url) {
        if(!url) {
            url = window.location.href;
        }
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"), results = regex.exec(url);
        if(!results) return null;
        if(!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    };

    /**
     * Funcion para debugar variables por consola.
     * Siempre que la variable debugEnabled sea true en la URL Ej: http://www.xxxx.com/?debugEnabled=true.
     */
    this.debugData = function(obj) {
        if(this.debugEnabled) {
            if(typeof obj.action !== "undefined" && obj.action != "") {
                console.log(':::: DEBUGGING ::: AT-INTERNET ::: ' + obj.action + '::::');
            }

            for(var property in obj) {
                if(obj.hasOwnProperty(property) && property != "action") {
                    console.log(obj[property]);
                }
            }
        }
    };

    /**
     * Inicializa el objeto de AT-Internet
     * @returns {null}
     */
    this.getATInternetInstance = function() {
        if(!this.instance) {
            this.instance = new ATInternet.Tracker.Tag({log: "logc407", logSSL: "logs1407", secure: false, site: siteID, domain: "xiti.com"});
        }

        var debugParam = getParameterByName("debugEnabled");
        if(debugParam != null && debugParam == "true") {
            this.debugEnabled = true;
        }

        return this.instance;
    };

    /**
     * Envia a AT-Internet informacion relativa a los clicks
     * @param obj
     * @returns {*}
     */
    this.sendClick = function(obj) {
        if(!this.instance) return console.log('You must call getATInternetInstance() method before perfom this action.');

        if(typeof obj === "string") {
            obj = JSON.parse(obj);
        }

        if(obj && typeof obj.click !== "undefined" && typeof obj.click.domElement !== "undefined") {
            var clickData = {
                elem: obj.click.domElement,
                level2: level2,
                type: (typeof obj.click.clickType !== "undefined" && obj.click.clickType != "") ? obj.click.clickType : "action",
            };

            if(typeof obj.click.clickName !== "undefined" && obj.click.clickName != "") {
                clickData.name = obj.click.clickName;
            }

            if(typeof obj.click.chapter !== "undefined" && obj.click.chapter != "") {
                clickData.chapter1 = obj.click.chapter;
            }
            if(typeof obj.click.subChapter !== "undefined" && obj.click.subChapter != "") {
                clickData.chapter2 = obj.click.subChapter;
            }
            if(typeof obj.click.subSubChapter !== "undefined" && obj.click.subSubChapter != "") {
                clickData.chapter3 = obj.click.subSubChapter;
            }

            this.instance.click.send(clickData);
            this.debugData({action : 'sendClick', result : { result : "OK", dataSended : clickData}});
        } else {
            this.debugData({action : 'sendClick', result : { result : "ERROR", message : "Wrong object received.", expectedObject : {click : { domElement: "", chapter : "", subChapter : "", subSubChapter : "", clickType : "", clickName : ""}}}});
        }
    };

    /**
     * Envia a AT-Internet informacion relativa a las paginas vistas.
     * @param obj
     * @returns {*}
     */
    this.sendPageView = function(obj) {
        if(!this.instance) return console.log('You must call getATInternetInstance() method before perfom this action.');

        if(obj && typeof obj.pageAttributes !== "undefined") {
            var pageData = {
                name : (typeof obj.pageAttributes.page !== "undefined" && obj.pageAttributes.page != "") ? obj.pageAttributes.page : "",
                level2: level2
            };

            if(typeof obj.pageAttributes.chapter !== "undefined" && obj.pageAttributes.chapter != "") {
                pageData.chapter1 = obj.pageAttributes.chapter;
            }

            if(typeof obj.pageAttributes.subChapter !== "undefined" && obj.pageAttributes.subChapter != "") {
                pageData.chapter2 = obj.pageAttributes.subChapter;
            }

            this.instance.page.set(pageData);

            var pageCustomData = {};
            if(typeof obj.siteVariables !== "undefined") {
                pageCustomData.site = {
                    7 : (typeof obj.siteVariables.language !== "undefined" && obj.siteVariables.language != "") ? obj.siteVariables.language : "ES",
                    8 : (typeof obj.siteVariables.login !== "undefined" && obj.siteVariables.login != "" && obj.siteVariables.login != null) ? obj.siteVariables.login : "No",
                };

                if(typeof obj.siteVariables.tags !== "undefined" && Array.isArray(obj.siteVariables.tags) && obj.siteVariables.tags.length > 0) {
                    var textoTags = "";
                    for(var i  in obj.siteVariables.tags) {
                        textoTags += obj.siteVariables.tags[i] + ",";
                    }
                    textoTags = textoTags.replace(/,\s*$/, "");
                    pageCustomData.site[2] = "[" + textoTags + "]";
                }

                if(typeof obj.siteVariables.previousChapter !== "undefined" && obj.siteVariables.previousChapter != "") {
                    pageCustomData.site[3] = obj.siteVariables.previousChapter;
                }
                if(typeof obj.siteVariables.previousPage !== "undefined" && obj.siteVariables.previousPage != "") {
                    pageCustomData.site[4] = obj.siteVariables.previousPage;
                }
            }
            if(typeof obj.pageVariables !== "undefined") {
                if(typeof obj.pageVariables.errorPage !== "undefined") {
                    pageCustomData.page = {
                        1 : (typeof obj.pageVariables.errorPage.errorCode !== "undefined" && obj.pageVariables.errorPage.errorCode != "") ? obj.pageVariables.errorPage.errorCode: "404",
                        2 : (typeof obj.pageVariables.errorPage.previousUrl !== "undefined" && obj.pageVariables.errorPage.previousUrl != "") ? obj.pageVariables.errorPage.previousUrl: "",
                        3 : (typeof obj.pageVariables.errorPage.targetUrl !== "undefined" && obj.pageVariables.errorPage.targetUrl != "") ? obj.pageVariables.errorPage.targetUrl: "",
                    };
                } else {
                    if(typeof obj.pageVariables.searchResults !== "undefined") {
                        pageCustomData.page = {
                            1 : (typeof obj.pageVariables.searchResults.searchBy !== "undefined" && obj.pageVariables.searchResults.searchBy != "") ? obj.pageVariables.searchResults.searchBy: "",
                            2 : (typeof obj.pageVariables.searchResults.findedResults !== "undefined" && obj.pageVariables.searchResults.findedResults != "") ? obj.pageVariables.searchResults.findedResults: "No",
                            3 : (typeof obj.siteVariables.previousPage !== "undefined" && obj.siteVariables.previousPage != "") ? obj.siteVariables.previousPage : "",
                            4 : (typeof obj.pageVariables.searchResults.language !== "undefined" && obj.pageVariables.searchResults.language != "") ? obj.pageVariables.searchResults.language: "",
                            5 : (typeof obj.pageVariables.searchResults.mediaType !== "undefined" && obj.pageVariables.searchResults.mediaType != "") ? obj.pageVariables.searchResults.mediaType: "", // FIXME Verificar porque me envian un array.
                        };
                    }
                }
            }

            if(Object.keys(pageCustomData).length > 0) {
                this.instance.customVars.set(pageCustomData);
            }

            if(typeof obj.siteVariables.tags !== "undefined" && Array.isArray(obj.siteVariables.tags) && obj.siteVariables.tags.length > 0) {
                this.instance.tags.set(obj.siteVariables.tags);
            }

            //Ticket:1371 // Identified Visitors to 395 // NO login:  Client-side user ID to 182
            var visorDataId  = 182;
            var personalSpace = $('.personal-space-navigation-layouts-section').length > 0 || document.URL.indexOf("/group") !== -1;

            if(personalSpace){
                visorDataId  = 395;
            }

            var visitorData = { id : visorDataId.toString() };
            if(typeof obj.visitor !== "undefined") {
                if(typeof obj.visitor.category !== "undefined" && obj.visitor.category != "") {
                    visitorData.category = obj.visitor.category;
                }
            }

            this.instance.identifiedVisitor.unset();
            this.instance.identifiedVisitor.set(visitorData);

            this.instance.dispatch();
            this.debugData({action : 'sendPageView', result : { result : "OK", dataSended : { pageData : pageData, pageCustomData : pageCustomData, visitorData : visitorData}}});
        } else {
            this.debugData({action : 'sendPageView', result : { result : "ERROR", message : "Wrong object received.", expectedObject : {pageAttributes : { chapter: "", subChapter : "", page : ""}}}});
        }
    };

    /**
     * Envia a AT-Internet informacion relativa a los publishers
     * @see https://developers.atinternet-solutions.com/javascript-en/campaigns-javascript-en/on-site-ads-javascript-en/
     * @param obj
     * @returns {*}
     */
    this.publisher = function(obj) {
        if(!this.instance) return console.log('You must call getATInternetInstance() method before perfom this action.');

        if(obj && typeof obj.publisher !== "undefined") {
            var publisherData = {
                campaignId : (typeof obj.publisher.campaigns !== "undefined" && obj.publisher.campaigns != "") ? ("[" + obj.publisher.campaigns + "]") : "",
                creation : (typeof obj.publisher.creatives !== "undefined" && obj.publisher.creatives != "") ? ("[" + obj.publisher.creatives + "]") : "",
                variant : (typeof obj.publisher.variant !== "undefined" && obj.publisher.variant != "") ? ("[" + obj.publisher.variant + "]") : "",
                format : (typeof obj.publisher.formats !== "undefined" && obj.publisher.formats != "") ? ("[" + obj.publisher.formats + "]") : "",
                generalPlacement : (typeof obj.publisher.generalPosition !== "undefined" && obj.publisher.generalPosition != "") ? ("[" + obj.publisher.generalPosition + "]"): "",
                detailedPlacement : (typeof obj.publisher.detailedPosition !== "undefined" && obj.publisher.detailedPosition != "") ? ("[" + obj.publisher.detailedPosition + "]") : "",
                advertiserId : (typeof obj.publisher.advertisers !== "undefined" && obj.publisher.advertisers != "") ? ("[" + obj.publisher.advertisers + "]") : "",
                url : (typeof obj.publisher.URLClickedLinks !== "undefined" && obj.publisher.URLClickedLinks != "") ? ("[" + obj.publisher.URLClickedLinks + "]") : "",
            };

            this.instance.publisher.send({impression : publisherData});
            this.debugData({action : 'publisher', result : { result : "OK", dataSended : { publisherData : publisherData}}});
        } else {
            this.debugData({action : 'publisher', result : { result : "ERROR", message : "Wrong object received.", expectedObject : {publisher : { campaignId : "", creation : "", variant : "", format : "", generalPlacement : "", detailedPlacement : "", advertiserId : "", url : ""}}}});
        }
    };
};